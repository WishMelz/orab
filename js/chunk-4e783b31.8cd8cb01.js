(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e783b31"],{ac6a:function(e,t,r){for(var a=r("cadf"),s=r("0d58"),n=r("2aba"),i=r("7726"),o=r("32e9"),l=r("84f2"),c=r("2b4c"),u=c("iterator"),d=c("toStringTag"),h=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=s(m),f=0;f<p.length;f++){var g,b=p[f],R=m[b],v=i[b],k=v&&v.prototype;if(k&&(k[u]||o(k,u,h),k[d]||o(k,d,b),l[b]=h,R))for(g in a)k[g]||n(k,g,a[g],!0)}},b2d5:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"role"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("角色列表")])],1),r("el-card",[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDia=!0}}},[e._v("添加角色")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleList,border:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,function(a,s){return r("el-row",{key:a.id,style:{"border-bottom":"1px solid #eee","border-top":0===s?"1px solid #eee":""},attrs:{type:"flex",align:"middle",zz:s}},[r("el-col",{attrs:{span:5}},[r("el-tag",{key:"tag",attrs:{closable:""},on:{close:function(r){return e.deleteRolesRights(t.row,a.id)}}},[e._v(e._s(a.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},e._l(a.children,function(a,s){return r("el-row",{key:a.id,attrs:{type:"flex",align:"middle",zz:s}},[r("el-col",{attrs:{span:5}},[r("el-tag",{key:"tag",attrs:{type:"success",closable:""},on:{close:function(r){return e.deleteRolesRights(t.row,a.id)}}},[e._v(e._s(a.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},e._l(a.children,function(a,s){return r("el-tag",{key:s,attrs:{type:"warning",closable:""},on:{close:function(r){return e.deleteRolesRights(t.row,a.id)}}},[e._v(e._s(a.authName))])}),1)],1)}),1)],1)})}}])}),r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),r("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.getRoleInfo(t.row.id)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteRoles(t.row.id)}}},[e._v("删除")]),r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.getRightAll(t.row)}}},[e._v("分配权限")])]}}])})],1),r("el-dialog",{attrs:{title:"添加角色",visible:e.addDia,width:"30%"},on:{"update:visible":function(t){e.addDia=t},close:function(t){return e.biaodan("addRef")}}},[r("el-form",{ref:"addRef",attrs:{model:e.addForm,rules:e.addRul,"label-position":"left","label-width":"30%"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:e.addForm.roleName,callback:function(t){e.$set(e.addForm,"roleName",t)},expression:"addForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{model:{value:e.addForm.roleDesc,callback:function(t){e.$set(e.addForm,"roleDesc",t)},expression:"addForm.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDia=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addRoles}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改角色",visible:e.alterDia,width:"30%"},on:{"update:visible":function(t){e.alterDia=t},close:function(t){return e.biaodan("alterRef")}}},[r("el-form",{ref:"alterRef",attrs:{model:e.alterRoleFrom,rules:e.alterRul}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:e.alterRoleFrom.roleName,callback:function(t){e.$set(e.alterRoleFrom,"roleName",t)},expression:"alterRoleFrom.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{model:{value:e.alterRoleFrom.roleDesc,callback:function(t){e.$set(e.alterRoleFrom,"roleDesc",t)},expression:"alterRoleFrom.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.alterDia=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.alterRoles}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配权限",visible:e.assRightDia,width:"30%"},on:{"update:visible":function(t){e.assRightDia=t}}},[r("el-tree",{ref:"tree",attrs:{data:e.rightList,"show-checkbox":"","node-key":"id","default-expand-all":!0,"default-checked-keys":e.defaultsCheckedArr,props:e.defaultProps}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.assRightDia=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.upDataRight}},[e._v("确 定")])],1)],1)],1)],1)},s=[],n=(r("ac6a"),r("96cf"),r("3b8d")),i={data:function(){return{roleList:[],addDia:!1,addForm:{roleName:"",roleDesc:""},addRul:{roleName:[{required:!0,message:"请输入用户名",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入用户名",trigger:"blur"}]},alterDia:!1,alterRoleFrom:{roleId:"",roleName:"",roleDesc:""},alterRul:{roleName:[{required:!0,message:"请输入用户名",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入用户名",trigger:"blur"}]},assRightDia:!1,defaultProps:{label:"authName",children:"children"},rightList:[],defaultsCheckedArr:[],roleId:""}},methods:{getRoleList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("roles");case 2:if(t=e.sent,r=t.data,200==r.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取用户失败"));case 6:this.roleList=r.data;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addRoles:function(){var e=this;this.$refs.addRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("roles",e.addForm);case 4:if(a=t.sent,s=a.data,201==s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("角色添加失败"));case 8:e.$message.success("用户添加成功"),e.getRoleList(),e.addDia=!1;case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},getRoleInfo:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.alterDia=!0,e.next=3,this.$http.get("roles/"+t);case 3:if(r=e.sent,a=r.data,200==a.meta.status){e.next=7;break}return e.abrupt("return",this.$message.error("获取角色信息失败"));case 7:this.alterRoleFrom=a.data;case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),alterRoles:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.put("roles/"+this.alterRoleFrom.roleId,this.alterRoleFrom);case 2:if(t=e.sent,r=t.data,200==r.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("修改失败"));case 6:this.$message.success("修改成功"),this.alterDia=!1,this.getRoleList();case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteRoles:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.$http.delete("roles/"+t).then(function(){r.$message.success("删除成功"),r.getRoleList()});case 2:r.$message({type:"success",message:"删除成功!"});case 3:case"end":return e.stop()}},e)}))).catch(function(){r.$message({type:"info",message:"已取消删除"})});case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),deleteRolesRights:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.delete("roles/".concat(t.id,"/rights/").concat(r));case 2:if(a=e.sent,s=a.data,200==s.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("取消权限失败"));case 6:this.$message.success("取消权限成功"),t.children=s.data;case 8:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),getRightAll:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.assRightDia=!0,this.roleId=t.id,e.next=4,this.$http.get("rights/tree");case 4:if(r=e.sent,a=r.data,200==a.meta.status){e.next=8;break}return e.abrupt("return",this.$message.error("获取权限列表失败"));case 8:this.rightList=a.data,s=[],this.getListRight(t,s),this.defaultsCheckedArr=s;case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getListRight:function(e,t){var r=this;if(!e.children)return t.push(e.id);e.children.forEach(function(e){return r.getListRight(e,t)})},upDataRight:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r,a,s,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.tree.getHalfCheckedKeys(),r=this.$refs.tree.getCheckedKeys(),a=t.concat(r),a=a.join(","),e.next=6,this.$http.post("roles/".concat(this.roleId,"/rights"),{rids:a});case 6:if(s=e.sent,n=s.data,200==n.meta.status){e.next=10;break}return e.abrupt("return",this.$message.error("权限修改失败"));case 10:this.$message.success("权限修改成功"),this.assRightDia=!1,this.getRoleList();case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),biaodan:function(e){this.$refs[e].resetFields()}},created:function(){this.getRoleList()}},o=i,l=(r("d759"),r("2877")),c=Object(l["a"])(o,a,s,!1,null,null,null);t["default"]=c.exports},d13d:function(e,t,r){},d759:function(e,t,r){"use strict";var a=r("d13d"),s=r.n(a);s.a}}]);
//# sourceMappingURL=chunk-4e783b31.8cd8cb01.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d12f46c"],{"02f4":function(e,t,r){var a=r("4588"),o=r("be13");e.exports=function(e){return function(t,r){var n,s,i=String(o(t)),c=a(r),l=i.length;return c<0||c>=l?e?"":void 0:(n=i.charCodeAt(c),n<55296||n>56319||c+1===l||(s=i.charCodeAt(c+1))<56320||s>57343?e?i.charAt(c):n:e?i.slice(c,c+2):s-56320+(n-55296<<10)+65536)}}},"0390":function(e,t,r){"use strict";var a=r("02f4")(!0);e.exports=function(e,t,r){return t+(r?a(e,t).length:1)}},"0a49":function(e,t,r){var a=r("9b43"),o=r("626a"),n=r("4bf8"),s=r("9def"),i=r("cd1c");e.exports=function(e,t){var r=1==e,c=2==e,l=3==e,u=4==e,d=6==e,p=5==e||d,g=t||i;return function(t,i,f){for(var m,h,v=n(t),b=o(v),x=a(i,f,3),_=s(b.length),y=0,A=r?g(t,_):c?g(t,0):void 0;_>y;y++)if((p||y in b)&&(m=b[y],h=x(m,y,v),e))if(r)A[y]=h;else if(h)switch(e){case 3:return!0;case 5:return m;case 6:return y;case 2:A.push(m)}else if(u)return!1;return d?-1:l||u?u:A}}},"0bfb":function(e,t,r){"use strict";var a=r("cb7c");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},1169:function(e,t,r){var a=r("2d95");e.exports=Array.isArray||function(e){return"Array"==a(e)}},"20d6":function(e,t,r){"use strict";var a=r("5ca1"),o=r("0a49")(6),n="findIndex",s=!0;n in[]&&Array(1)[n](function(){s=!1}),a(a.P+a.F*s,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(n)},"214f":function(e,t,r){"use strict";r("b0c5");var a=r("2aba"),o=r("32e9"),n=r("79e5"),s=r("be13"),i=r("2b4c"),c=r("520a"),l=i("species"),u=!n(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var p=i(e),g=!n(function(){var t={};return t[p]=function(){return 7},7!=""[e](t)}),f=g?!n(function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[l]=function(){return r}),r[p](""),!t}):void 0;if(!g||!f||"replace"===e&&!u||"split"===e&&!d){var m=/./[p],h=r(s,p,""[e],function(e,t,r,a,o){return t.exec===c?g&&!o?{done:!0,value:m.call(t,r,a)}:{done:!0,value:e.call(r,t,a)}:{done:!1}}),v=h[0],b=h[1];a(String.prototype,e,v),o(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"28a5":function(e,t,r){"use strict";var a=r("aae3"),o=r("cb7c"),n=r("ebd6"),s=r("0390"),i=r("9def"),c=r("5f1b"),l=r("520a"),u=r("79e5"),d=Math.min,p=[].push,g="split",f="length",m="lastIndex",h=4294967295,v=!u(function(){RegExp(h,"y")});r("214f")("split",2,function(e,t,r,u){var b;return b="c"=="abbc"[g](/(b)*/)[1]||4!="test"[g](/(?:)/,-1)[f]||2!="ab"[g](/(?:ab)*/)[f]||4!="."[g](/(.?)(.?)/)[f]||"."[g](/()()/)[f]>1||""[g](/.?/)[f]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!a(e))return r.call(o,e,t);var n,s,i,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,g=void 0===t?h:t>>>0,v=new RegExp(e.source,u+"g");while(n=l.call(v,o)){if(s=v[m],s>d&&(c.push(o.slice(d,n.index)),n[f]>1&&n.index<o[f]&&p.apply(c,n.slice(1)),i=n[0][f],d=s,c[f]>=g))break;v[m]===n.index&&v[m]++}return d===o[f]?!i&&v.test("")||c.push(""):c.push(o.slice(d)),c[f]>g?c.slice(0,g):c}:"0"[g](void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,a){var o=e(this),n=void 0==r?void 0:r[t];return void 0!==n?n.call(r,o,a):b.call(String(o),r,a)},function(e,t){var a=u(b,e,this,t,b!==r);if(a.done)return a.value;var l=o(e),p=String(this),g=n(l,RegExp),f=l.unicode,m=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g"),x=new g(v?l:"^(?:"+l.source+")",m),_=void 0===t?h:t>>>0;if(0===_)return[];if(0===p.length)return null===c(x,p)?[p]:[];var y=0,A=0,w=[];while(A<p.length){x.lastIndex=v?A:0;var k,L=c(x,v?p:p.slice(A));if(null===L||(k=d(i(x.lastIndex+(v?0:A)),p.length))===y)A=s(p,A,f);else{if(w.push(p.slice(y,A)),w.length===_)return w;for(var F=1;F<=L.length-1;F++)if(w.push(L[F]),w.length===_)return w;A=y=k}}return w.push(p.slice(y)),w}]})},"520a":function(e,t,r){"use strict";var a=r("0bfb"),o=RegExp.prototype.exec,n=String.prototype.replace,s=o,i="lastIndex",c=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[i]||0!==t[i]}(),l=void 0!==/()??/.exec("")[1],u=c||l;u&&(s=function(e){var t,r,s,u,d=this;return l&&(r=new RegExp("^"+d.source+"$(?!\\s)",a.call(d))),c&&(t=d[i]),s=o.call(d,e),c&&s&&(d[i]=d.global?s.index+s[0].length:t),l&&s&&s.length>1&&n.call(s[0],r,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)}),s}),e.exports=s},"5f1b":function(e,t,r){"use strict";var a=r("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var n=r.call(e,t);if("object"!==typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"6a6c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"addgood"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("权限列表")])],1),r("el-card",[r("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"","show-icon":"",closable:!1}}),r("el-steps",{attrs:{active:e.activeName-0,"align-center":""}},[r("el-step",{attrs:{title:"基本信息"}}),r("el-step",{attrs:{title:"商品参数"}}),r("el-step",{attrs:{title:"商品属性"}}),r("el-step",{attrs:{title:"商品图片"}}),r("el-step",{attrs:{title:"商品内容"}}),r("el-step",{attrs:{title:"商品完成"}})],1),r("el-form",{ref:"goodsRef",attrs:{model:e.goodsAddForm,rules:e.goodsRul,"label-width":"100px","label-position":"top"}},[r("el-tabs",{attrs:{"tab-position":"left","before-leave":e.handleBeforeLeave},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-input",{model:{value:e.goodsAddForm.goods_name,callback:function(t){e.$set(e.goodsAddForm,"goods_name",t)},expression:"goodsAddForm.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[r("el-input",{attrs:{type:"number"},model:{value:e.goodsAddForm.goods_price,callback:function(t){e.$set(e.goodsAddForm,"goods_price",t)},expression:"goodsAddForm.goods_price"}})],1),r("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[r("el-input",{attrs:{type:"number"},model:{value:e.goodsAddForm.goods_weight,callback:function(t){e.$set(e.goodsAddForm,"goods_weight",t)},expression:"goodsAddForm.goods_weight"}})],1),r("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[r("el-input",{attrs:{type:"number"},model:{value:e.goodsAddForm.goods_number,callback:function(t){e.$set(e.goodsAddForm,"goods_number",t)},expression:"goodsAddForm.goods_number"}})],1),r("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[r("el-cascader",{attrs:{options:e.categoryList,props:e.categoryProps},on:{change:e.handleChange},model:{value:e.goodsAddForm.goods_cat,callback:function(t){e.$set(e.goodsAddForm,"goods_cat",t)},expression:"goodsAddForm.goods_cat"}})],1)],1),r("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},e._l(e.manyData,function(t){return r("el-form-item",{key:t.attr_id,attrs:{label:t.attr_name}},[r("el-checkbox-group",{model:{value:t.attr_vals,callback:function(r){e.$set(t,"attr_vals",r)},expression:"item.attr_vals"}},e._l(t.attr_vals,function(e,t){return r("el-checkbox",{key:t,attrs:{label:e,border:""}})}),1)],1)}),1),r("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},e._l(e.onlyData,function(t){return r("el-form-item",{key:t.attr_id,attrs:{label:t.attr_name}},[r("el-input",{model:{value:t.attr_vals,callback:function(r){e.$set(t,"attr_vals",r)},expression:"item.attr_vals"}})],1)}),1),r("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[r("el-upload",{attrs:{action:e.uploadURL,"on-preview":e.handlePreview,"on-remove":e.handleRemove,headers:e.uploadToken,"on-success":e.handleSuccess,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),r("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[r("quill-editor",{ref:"myQuillEditor",model:{value:e.goodsAddForm.goods_introduce,callback:function(t){e.$set(e.goodsAddForm,"goods_introduce",t)},expression:"goodsAddForm.goods_introduce"}}),r("el-button",{attrs:{type:"primary"},on:{click:e.addGoods}},[e._v("提交")])],1)],1)],1)],1)],1)},o=[],n=(r("20d6"),r("28a5"),r("ac6a"),r("96cf"),r("3b8d")),s=r("2ef0"),i=r.n(s),c={data:function(){return{activeName:"0",goodsdata:{},goodsAddForm:{goods_name:"",goods_price:"",goods_weight:"",goods_number:"",goods_cat:[],pics:[],goods_introduce:"",attrs:[]},goodsRul:{goods_name:[{required:!0,message:"请输入名称11",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格！",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量！",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量！",trigger:"blur"}],goods_cat:[{required:!0,message:"请输入商品分类！",trigger:"blur"}]},categoryList:[],categoryProps:{label:"cat_name",value:"cat_id",children:"children"},manyData:[],onlyData:[],uploadURL:"http://www.itsse.cn:8888/api/private/v1/upload",uploadToken:{Authorization:window.sessionStorage.getItem("token")},uploadImagePath:""}},methods:{handleClick:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(1!=this.activeName){e.next=11;break}return e.next=3,this.$http.get("categories/".concat(this.categoryId,"/attributes"),{params:{sel:"many"}});case 3:if(t=e.sent,r=t.data,200==r.meta.status){e.next=7;break}return e.abrupt("return",this.$message.error("商品参数获取失败"));case 7:r.data.forEach(function(e){e.attr_vals=e.attr_vals.trim().split(" ")}),this.manyData=r.data,e.next=19;break;case 11:if(2!=this.activeName){e.next=19;break}return e.next=14,this.$http.get("categories/".concat(this.categoryId,"/attributes"),{params:{sel:"only"}});case 14:if(a=e.sent,o=a.data,200==o.meta.status){e.next=18;break}return e.abrupt("return",this.$message.error("商品参数获取失败"));case 18:this.onlyData=o.data;case 19:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleChange:function(){3!=this.goodsAddForm.goods_cat.length&&(this.goodsAddForm.goods_cat=[])},getCateList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("categories");case 2:if(t=e.sent,r=t.data,200==r.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("商品分类获取失败"));case 6:this.categoryList=r.data;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleBeforeLeave:function(e,t){if(0==t&&null==this.categoryId)return this.$message.error("请必须选择到三级分类!!!"),!1},handlePreview:function(e){this.uploadURL=e.response.data.url},handleRemove:function(e){var t=e.response.data.tmp_path,r=this.goodsAddForm.pics.findIndex(function(e){return e.pic==t});this.goodsAddForm.pics.splice(r,1),console.log(this.goodsAddForm.pics)},handleSuccess:function(e){200==e.meta.status&&this.goodsAddForm.pics.push({pic:e.data.tmp_path})},addGoods:function(){var e=this;this.$refs.goodsRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r){var a,o,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("商品参数不能为空！！！"));case 2:return a=i.a.cloneDeep(e.goodsAddForm),a.goods_cat=a.goods_cat.join(","),e.manyData.forEach(function(e){a.attrs.push({attr_id:e.attr_id,attr_value:e.attr_vals.join(" ")})}),e.onlyData.forEach(function(e){a.attrs.push({attr_id:e.attr_id,attr_value:e.attr_vals})}),t.next=8,e.$http.post("goods",a);case 8:if(o=t.sent,n=o.data,201==n.meta.status){t.next=12;break}return t.abrupt("return",e.$message.error("商品创建失败"));case 12:e.$message.success("商品创建成功"),e.$router.push("/goods");case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},created:function(){this.getCateList()},computed:{categoryId:function(){return 3==this.goodsAddForm.goods_cat.length?this.goodsAddForm.goods_cat[2]:null}}},l=c,u=(r("9f74"),r("2877")),d=Object(u["a"])(l,a,o,!1,null,null,null);t["default"]=d.exports},"9f74":function(e,t,r){"use strict";var a=r("bafb"),o=r.n(a);o.a},aae3:function(e,t,r){var a=r("d3f4"),o=r("2d95"),n=r("2b4c")("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==o(e))}},ac6a:function(e,t,r){for(var a=r("cadf"),o=r("0d58"),n=r("2aba"),s=r("7726"),i=r("32e9"),c=r("84f2"),l=r("2b4c"),u=l("iterator"),d=l("toStringTag"),p=c.Array,g={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=o(g),m=0;m<f.length;m++){var h,v=f[m],b=g[v],x=s[v],_=x&&x.prototype;if(_&&(_[u]||i(_,u,p),_[d]||i(_,d,v),c[v]=p,b))for(h in a)_[h]||n(_,h,a[h],!0)}},b0c5:function(e,t,r){"use strict";var a=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},bafb:function(e,t,r){},cd1c:function(e,t,r){var a=r("e853");e.exports=function(e,t){return new(a(e))(t)}},e853:function(e,t,r){var a=r("d3f4"),o=r("1169"),n=r("2b4c")("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),a(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
//# sourceMappingURL=chunk-0d12f46c.65adee47.js.map